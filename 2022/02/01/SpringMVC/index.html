
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SpringMVC - Sunrise-shine的博客</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="Just do it!,主要内容
一、简介MVC的定义MVC是一种软件架构的思想，将软件按照模型、视图、控制器来划分。
MModel，模型层，指工程中的JavaBean，作用是处理数据。
JavaBean的两类一类是实体类,"> 
    <meta name="author" content="Sunrise-shine"> 
    <link rel="alternative" href="atom.xml" title="Sunrise-shine的博客" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 5.4.1"></head>

<body class="loading">
    <span id="config-title" style="display:none">Sunrise-shine的博客</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://Sunrise-shine.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">SpringMVC</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">SpringMVC</h1>
        <div class="stuff">
            <span>二月 01, 2022</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a></li></ul>


        </div>
        <div class="content markdown">
            <h1 id="主要内容"><a href="#主要内容" class="headerlink" title="主要内容"></a>主要内容</h1><p><img src="https://s2.loli.net/2022/02/01/rqs2WMkTnNxFtGp.png" alt="image-20220201160516467"></p>
<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><h2 id="MVC的定义"><a href="#MVC的定义" class="headerlink" title="MVC的定义"></a>MVC的定义</h2><p>MVC是一种软件架构的思想，将软件按照模型、视图、控制器来划分。</p>
<h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><p>Model，模型层，指工程中的JavaBean，作用是处理数据。</p>
<h4 id="JavaBean的两类"><a href="#JavaBean的两类" class="headerlink" title="JavaBean的两类"></a>JavaBean的两类</h4><p>一类是实体类Bean：专门存储业务数据的属性和实例域，如User类等</p>
<p>一类是业务处理Bean：指Service或Dao对象，专门用于处理业务逻辑和数据访问</p>
<h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><p>View，视图层，指工程中的html或jsp等页面，作用是，直接与用户交互，展示数据</p>
<h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>Controller，控制层，指工程中的Servlet，作用是接受请求和响应浏览器。</p>
<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><p>用户通过View层发送请求到服务器，在服务器中，请求被Controller层接收，调用相应的Model层，处理请求。完毕后，将处理结果返回给Controller层，Controller层再根据请求处理的结果，找到相应的View层，响应给浏览器，展示到用户。</p>
<h2 id="SpringMVC的定义"><a href="#SpringMVC的定义" class="headerlink" title="SpringMVC的定义"></a>SpringMVC的定义</h2><p>SpringMVC是Spring的一个后续产品，是Spring的一个子项目。</p>
<p>其是Spring为表述层开发提供的一个一整套完备的解决方案。</p>
<h3 id="SpringMVC的特点"><a href="#SpringMVC的特点" class="headerlink" title="SpringMVC的特点"></a>SpringMVC的特点</h3><ul>
<li>Spring家族原生产品，与IOC容器等基础设施无缝对接</li>
<li>基于原生的Servlet，通过功能强大的前端控制器DispatcherServlet，对请求和响应进行统一处理，不用自己写Servlet语法的代码</li>
<li>表述层各细分领域需要解决的问题全方位覆盖，提供全面解决方案</li>
<li>代码简洁，大幅提升开发效率</li>
<li>内部组件化程度高，可插拔式组件即插即用，想要什么功能配置相关组件即可</li>
<li>性能显著</li>
</ul>
<h1 id="二、HelloWorld"><a href="#二、HelloWorld" class="headerlink" title="二、HelloWorld"></a>二、HelloWorld</h1><h2 id="1-创建maven工程"><a href="#1-创建maven工程" class="headerlink" title="1. 创建maven工程"></a>1. 创建maven工程</h2><p>pom.xml：</p>
<ul>
<li><p>打包方式</p>
</li>
<li><p>引入依赖</p>
</li>
<li>增加web模块(webapp这个Directory和web.xml)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="line">         xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;artifactId&gt;TestMaven&lt;/artifactId&gt;</span><br><span class="line">        &lt;groupId&gt;org.example&lt;/groupId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.test.mvc&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springMVC&lt;/artifactId&gt;</span><br><span class="line">    &lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!-- SpringMVC --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">5.3</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 日志 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.2</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ServletAPI --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">3.1</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">            &lt;!-- 表示当前的服务器中已经提供了servlet-api，不会存在于整合后的war包中 --&gt;</span><br><span class="line">            &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- Spring5和Thymeleaf整合包 --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">3.0</span><span class="number">.12</span>.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;<span class="number">8</span>&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;<span class="number">8</span>&lt;/maven.compiler.target&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<!-- 这表示当前的服务器中已经提供了servlet-api，不需要导入，也就是说，他不会存在于整合后的war包中 -->
<pre><code>        &lt;scope&gt;provided&lt;/scope&gt;
</code></pre><h3 id="依赖结果"><a href="#依赖结果" class="headerlink" title="依赖结果"></a>依赖结果</h3><p><img src="https://s2.loli.net/2022/02/01/PQUxFGAhluVaMRC.png" alt="image-20220201223036137"></p>
<h2 id="2-配置web-xml"><a href="#2-配置web-xml" class="headerlink" title="2. 配置web.xml"></a>2. 配置web.xml</h2><p>注册SpringMVC的前端控制器DispatcherServlet</p>
<h3 id="a-默认配置方式"><a href="#a-默认配置方式" class="headerlink" title="a. 默认配置方式"></a>a. 默认配置方式</h3><p>此配置作用下，SpringMVC的配置文件默认为与WEB-INF下，默认名称为<servlet-name>-servlet.xml。</p>
<p>例如，以下配置所对应SpringMVC的配置文件将位于WEB-INF下，文件名为SpringMVC-servlet.xml</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置SpringMVC的前端控制器，对浏览器发送的请求统一进行处理 --&gt;</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        设置SpringMVC的核心控制器所能处理的请求的请求路径</span><br><span class="line">        / 能匹配的请求，可以是类似/login(/a之类)或.html或.js或.css方式的请求路径</span><br><span class="line">        但是不能匹配.jsp请求路径的请求，防止被作为一个普通请求被处理，无法显示.jsp界面</span><br><span class="line">        <span class="string">&quot;/*&quot;</span> 包括.jsp请求在内的所有请求</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>位置默认，名称默认，但在maven中，配置文件应当放在resource下，所以：</p>
<h3 id="b-拓展配置方式-常用"><a href="#b-拓展配置方式-常用" class="headerlink" title="b. 拓展配置方式(常用)"></a>b. 拓展配置方式(常用)</h3><p>配置SpringMVC配置文件的位置和名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;web-app xmlns=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="line">         xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="line">         version=<span class="string">&quot;4.0&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">        &lt;!-- 配置SpringMVC配置文件的位置和名称 --&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">            &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">        &lt;!-- 将前端控制器的初始化时间提前到服务器启动时，防止第一次访问时因加载过多，而影响访问速度 --&gt;</span><br><span class="line">        &lt;load-on-startup&gt;<span class="number">1</span>&lt;/load-on-startup&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-创建请求控制器"><a href="#3-创建请求控制器" class="headerlink" title="3. 创建请求控制器"></a>3. 创建请求控制器</h2><p>由于前端控制器对浏览器发送的请求进行了统一的处理，但是具体的请求有不同的处理方式，因此需要创建处理具体请求的类，即请求控制器。</p>
<p>请求控制器中每一个处理请求的方法称为控制器方法。</p>
<p>因为SpringMVC的控制器由一个POJO(普通Java类)担任，因此需要通过@Controller注解将其标识为一个控制层组件，交给IOC容器管理，此时SoringMVC才能识别控制器的存在。</p>
<h2 id="4-新建SpringMVC的配置文件"><a href="#4-新建SpringMVC的配置文件" class="headerlink" title="4. 新建SpringMVC的配置文件"></a>4. 新建SpringMVC的配置文件</h2><p>包括视图解析器和组件扫描器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.mvc.controller&quot;</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;!-- 配置Thymeleaf视图解析器 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;viewResolver&quot;</span> class=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span><br><span class="line">        &lt;!-- 视图解析的优先级 --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;order&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;characterEncoding&quot;</span> value=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;templateEngine&quot;</span>&gt;</span><br><span class="line">            &lt;bean class=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;templateResolver&quot;</span>&gt;</span><br><span class="line">                    &lt;!-- 解析策略 --&gt;</span><br><span class="line">                    &lt;bean class=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span><br><span class="line">                        &lt;!-- 视图前缀 --&gt;</span><br><span class="line">                        &lt;property name=<span class="string">&quot;prefix&quot;</span> value=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span><br><span class="line">                        &lt;!-- 视图后缀 --&gt;</span><br><span class="line">                        &lt;property name=<span class="string">&quot;suffix&quot;</span> value=<span class="string">&quot;.html&quot;</span>/&gt;</span><br><span class="line">                        &lt;property name=<span class="string">&quot;templateMode&quot;</span> value=<span class="string">&quot;HTML5&quot;</span>/&gt;</span><br><span class="line">                        &lt;property name=<span class="string">&quot;characterEncoding&quot;</span> value=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="line">                    &lt;/bean&gt;</span><br><span class="line">                &lt;/property&gt;</span><br><span class="line">            &lt;/bean&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-测试HelloWorld"><a href="#5-测试HelloWorld" class="headerlink" title="5. 测试HelloWorld"></a>5. 测试HelloWorld</h2><p><img src="https://s2.loli.net/2022/02/02/uBiXqUbThdQwjmL.png" alt="image-20220202220621011"></p>
<p><img src="https://s2.loli.net/2022/02/02/TLouqwFOvmsd3A9.png" alt="image-20220202222041226"></p>
<h2 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h2><p>浏览器发送请求，若请求地址符合前端控制器的url-pattern，该请求就会被前端控制器DispatcherServlet处理。前端控制器会读取SpringMVC的核心配置文件，通过扫描组件找到控制器，将请求地址与控制器的@RequestMapping注解的value属性值进行匹配。若匹配成功，该注解所标识的控制器方法，就是处理请求的方法。处理请求的方法，需要返回一个字符串类型的视图名称，该视图名称会被视图解析器解析，加上前缀和后缀组成视图的路径，通过Thymeleaf对视图进行渲染，最终转发到视图对应页面。</p>
<ol>
<li>在pom中配置包名、依赖名和版本号，引入相关依赖</li>
<li>创建webapp这个Directry和web.xml配置文件，并配置SpringMVC配置文件的位置和名称</li>
<li>在SpringMVC中配置前端控制器(和视图解析器)。</li>
<li>建立前端控制器类和相关.html等文件</li>
</ol>
<h1 id="三、-RequestMapping注解"><a href="#三、-RequestMapping注解" class="headerlink" title="三、@RequestMapping注解"></a>三、@RequestMapping注解</h1><p>设置的属性越多，要匹配所需的条件越多，匹配得越精确。</p>
<h2 id="注解的功能"><a href="#注解的功能" class="headerlink" title="注解的功能"></a>注解的功能</h2><p>@RequestMapping注解的作用就是将请求和处理请求的控制器方法关联起来，建立映射关系，要保证请求对应的地址是唯一的(只能存在一个@RequestMapping(/target))</p>
<p>SpringMVC接收到指定的请求，就会找到映射关系中对应的控制器方法来处理这个请求。</p>
<h2 id="注解的位置"><a href="#注解的位置" class="headerlink" title="注解的位置"></a>注解的位置</h2><p>@RequestMapping标识一个类：设置映射请求的请求路径的初始信息</p>
<p>@RequestMapping标识一个方法：设置映射请求的请求路径的具体信息</p>
<p><img src="https://s2.loli.net/2022/02/02/3aqkhF9rJLgSlv6.png" alt="image-20220202234334175"></p>
<p><img src="https://s2.loli.net/2022/02/02/XwRgHEvnBlmjo41.png" alt="image-20220202234417856"></p>
<h2 id="注解的value属性"><a href="#注解的value属性" class="headerlink" title="注解的value属性"></a>注解的value属性</h2><p>@RequestMapping注解的value属性，通过请求的请求地址匹配请求映射</p>
<p>@RequestMapping注解的value属性，是一个字符串类型的数组，表示该请求映射能够匹配多个请求地址所对应的请求</p>
<p>@RequestMapping注解的value属性，必须设置，至少通过地址匹配请求映射</p>
<p><img src="https://s2.loli.net/2022/02/03/ZeKs7WV69M4CfbO.png" alt="image-20220203232143281"></p>
<h2 id="注解的method属性"><a href="#注解的method属性" class="headerlink" title="注解的method属性"></a>注解的method属性</h2><p>@RequestMapping注解的method属性通过请求的方式(get或post)匹配请求映射(超链接发送的是get请求)</p>
<p>@RequestMapping注解的method属性是一个RequestMethod类型的数组，表示该请求映射能匹配多种请求方式的请求</p>
<p><img src="https://s2.loli.net/2022/02/04/xQWbVFaI2YkeKMr.png" alt="image-20220204182816755"></p>
<p><strong>在默认的情况下，即不设置method属性时，post和get都支持；但设置完之后，只支持设置的那个方式。</strong></p>
<p>若当前请求的请求地址满足请求映射的value属性，但是请求方式不满足method属性，则浏览器报错405：Request method ‘POST’ not supported</p>
<p><img src="https://s2.loli.net/2022/02/04/OqnPmQxWXDToGHJ.png" alt="image-20220204182905633"></p>
<p><img src="https://s2.loli.net/2022/02/04/Uk1dpJwjV47YToO.png" alt="image-20220204182957386"></p>
<p>上边可行，下边不可行。</p>
<blockquote>
<ol>
<li>对于处理请求方式的控制器方法，SpringMVC中提供了@RequestMapping的派生注解</li>
</ol>
<ul>
<li>处理get请求：@GetMapping</li>
<li>处理post请求：@PostMapping</li>
<li>处理put请求：@PutMapping</li>
<li>处理delete请求：@DeleteMapping</li>
</ul>
<p>常用的请求方式：get、post、put、delete</p>
<ol>
<li>但目前只支持get和post，若设置了其他表单提交的请求方式，则按照默认的get方式处理。</li>
</ol>
</blockquote>
<h2 id="注解的params属性-了解"><a href="#注解的params属性-了解" class="headerlink" title="注解的params属性(了解)"></a>注解的params属性(了解)</h2><p><img src="https://s2.loli.net/2022/02/04/Qt6ZquWkBxh5G9c.png" alt="image-20220204194532789"></p>
<h2 id="SpringMVC支持ant风格的路径"><a href="#SpringMVC支持ant风格的路径" class="headerlink" title="SpringMVC支持ant风格的路径"></a>SpringMVC支持ant风格的路径</h2><h3 id="："><a href="#：" class="headerlink" title="?："></a>?：</h3><p>表示任意的单个字符</p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>这个字符不能是?：在地址栏中，?后匹配的是请求参数(也就是get方式提交数据时的情况)，如果是?，那么路径就只剩下请求中前边那个字符了。</p>
<p><img src="https://s2.loli.net/2022/02/04/6xgjGLtJTF9sDh7.png" alt="image-20220204215412314"></p>
<p>也不能是“/”：在路径中是路径分隔符</p>
<h3 id="：-1"><a href="#：-1" class="headerlink" title="*："></a>*：</h3><p>表示任意的0个或多个字符</p>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><p>上边两个依旧成立</p>
<h3 id="：-2"><a href="#：-2" class="headerlink" title="**："></a>**：</h3><p>表示任意的一层或多层目录</p>
<h4 id="注意：-1"><a href="#注意：-1" class="headerlink" title="注意："></a>注意：</h4><p>使用时，只能用/**/xxx的方式</p>
<p>也就是说，不能是/a**a/xxx这个样子，否则</p>
<p>会被当做两个”*”占位符来使用。</p>
<h2 id="SpringMVC支持路径中的占位符"><a href="#SpringMVC支持路径中的占位符" class="headerlink" title="SpringMVC支持路径中的占位符"></a>SpringMVC支持路径中的占位符</h2><h3 id="原始方式"><a href="#原始方式" class="headerlink" title="原始方式"></a>原始方式</h3><h4 id="deleteUser-id-1"><a href="#deleteUser-id-1" class="headerlink" title="/deleteUser?id=1"></a>/deleteUser?id=1</h4><h3 id="rest方式"><a href="#rest方式" class="headerlink" title="rest方式"></a>rest方式</h3><h4 id="deleteUser-1"><a href="#deleteUser-1" class="headerlink" title="/deleteUser/1"></a>/deleteUser/1</h4><p>SpringMVC路径中的占位符常用于restful风格中，当<strong>请求路径中将某些数据通过路径的方式</strong>传输到服务器中，就可以在相应的@RequestMapping注解的value属性中通过占位符(xxx)表示传输的数据，再通过@PathVariable注解，将占位符所表示的数据，赋值给控制方法的形参。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发送请求的格式</span></span><br><span class="line">&lt;a th:href=<span class="string">&quot;@&#123;/a1/target/1/admin&#125;&quot;</span>&gt;访问路径占位符**时&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制器中的请求映射格式</span></span><br><span class="line"> <span class="meta">@RequestMapping(&quot;/a1/target/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">target</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id, <span class="meta">@PathVariable(&quot;username&quot;)</span>String username)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id: &quot;</span> + id + <span class="string">&quot; username: &quot;</span> + username);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/02/04/iDfhW1lpAoVa4BQ.png" alt="image-20220204230621610"></p>
<h1 id="四、SpringMVC获取请求参数"><a href="#四、SpringMVC获取请求参数" class="headerlink" title="四、SpringMVC获取请求参数"></a>四、SpringMVC获取请求参数</h1><h2 id="通过ServletAPI获取-一般不用"><a href="#通过ServletAPI获取-一般不用" class="headerlink" title="通过ServletAPI获取(一般不用)"></a>通过ServletAPI获取(一般不用)</h2><p>因为SpringMVC中，已经封装了相关的ServletAPI的内容，并且提供了更为简洁的方式去调用，所以尽量不用原生的ServletAPI。</p>
<p>将HttpServletRequest作为控制器方法的形参，此时HttpServletRequest类型的参数，表示封装了当前请求的请求报文的对象。</p>
<p><img src="https://s2.loli.net/2022/02/05/vh9AY3Fa2TO1DwU.png" alt="image-20220205231831742"></p>
<p>因为，DispatcherController会根据当前其所包含数据，自动为控制器方法(@RequestMapping注解的方法)的参数赋值。</p>
<p>但此时，不能使用占位符{}了，因为request.getParameter( )方法，只能根据name来获取value。若是占位符的话，只有值value，没有name，导致方法无法使用。</p>
<h2 id="通过控制器方法的形参获取请求参数"><a href="#通过控制器方法的形参获取请求参数" class="headerlink" title="通过控制器方法的形参获取请求参数"></a>通过控制器方法的形参获取请求参数</h2><p>在控制器方法的形参位置，<strong>设置和请求参数同名的形参</strong>(不同名则无法获取到)，当浏览器发送请求，匹配到请求映射时，在DispatcherServlet中就会将请求参数赋值给相应的形参。</p>
<p><img src="https://s2.loli.net/2022/02/06/RcNvH2VFSqgTMAD.png" alt="image-20220206233040577"></p>
<p><img src="https://s2.loli.net/2022/02/06/MuETIB9ALP8DOVU.png" alt="image-20220206233218936"></p>
<p><img src="https://s2.loli.net/2022/02/06/nE14u8U29oWLbiF.png" alt="image-20220206233326972"></p>
<p><img src="https://s2.loli.net/2022/02/06/1qiVUuDcRErhCm5.png" alt="image-20220206233236981"></p>
<blockquote>
<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><p>单个请求参数直接获取即可</p>
<p>若为多个同名的请求参数，可以使用字符串类型(逗号分隔开请求参数的每一个值)或字符串数组类型(用Arrays.toString( )方法输出)。</p>
</blockquote>
<h2 id="RequestParam"><a href="#RequestParam" class="headerlink" title="@RequestParam"></a>@RequestParam</h2><p> @RequestParam是将请求参数和控制器方法的形参创建映射关系</p>
<p>原本就有一个默认的值，用不用都可以。</p>
<p>@RequestParam注解一共有三个属性：</p>
<ul>
<li><p>value：指定为形参赋值的请求参数的参数名</p>
</li>
<li><p>required：设置是否必须传输此请求参数(不传就报错)，默认值为true</p>
<p>若设置为true，则当前请求必须传输value所指定的请求参数，若没有传输该请求参数，且没有设置defaultValue属性，则页面报错400：Required String parameter ‘xxx’ is not present; 若设置为false，则当前请求不是必须传输value所指定的请求参数，若没有传输，则注解所标识的形参的值为null。</p>
</li>
<li><p>defaultValue：不管required属性值为true或false，当value所指定的请求参数没有传输或传输的值为null时，则使用其为形参赋值。</p>
<p><img src="https://s2.loli.net/2022/02/10/lMr5JvcPwZeWxSR.png" alt="image-20220210155004264"></p>
</li>
</ul>
<h2 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="@RequestHeader"></a>@RequestHeader</h2><p> @RequestHeader是将请求头信息和控制器方法的形参创建映射关系</p>
<p>参数与上边那个一样。</p>
<p><img src="https://s2.loli.net/2022/02/10/sMIzL37SxneqVly.png" alt="image-20220210161901846"></p>
<p>如果输出host，则输出是localhost:8080</p>
<h2 id="CookieValue"><a href="#CookieValue" class="headerlink" title="@CookieValue"></a>@CookieValue</h2><p>@CookieValue是将cookie数据和控制器方法的形参创建映射关系。</p>
<p>三个参数，用法同上</p>
<p>第一次调用getSession()时，Set-Cookie JSESSIONID存在于响应报文中的，但创建并相应到服务器之后之后，存在于请求报文中。</p>
<h2 id="通过POJO获取请求参数"><a href="#通过POJO获取请求参数" class="headerlink" title="通过POJO获取请求参数"></a>通过POJO获取请求参数</h2><p>可以在控制器方法的形参位置设置为一个实体类类型的形参，此时若浏览器传输的请求参数的参数名和实体类中的属性名一致，那么请求参数就会为此属性赋值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form th:action=<span class="string">&quot;@&#123;/testBean&#125;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    性别：&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;女&quot;</span>&gt;女&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;男&quot;</span>&gt;男&lt;br&gt;</span><br><span class="line">    年龄：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;使用实体类&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testBean&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testBean</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/02/10/yulhCrWIYTp3Jje.png" alt="image-20220210182908632"></p>
<h2 id="解决获取请求参数的乱码问题"><a href="#解决获取请求参数的乱码问题" class="headerlink" title="解决获取请求参数的乱码问题"></a>解决获取请求参数的乱码问题</h2><p>解决获取请求参数的乱码问题，可以使用SpringMVC提供的编码过滤器CharacterEncodingFilter，但是必须在web.xml中进行注册。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置编码过滤器 --&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;!-- 根据源码获得 --&gt;</span><br><span class="line">        &lt;!-- 设置请求的编码格式 --&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-<span class="number">8</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;!-- 设置响应的编码经过过滤器 --&gt;</span><br><span class="line">        &lt;param-name&gt;forceResponseEncoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;<span class="literal">true</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="注-1"><a href="#注-1" class="headerlink" title="注"></a>注</h3><p>Springmvc中处理编码的过滤器一定要配置到其他过滤器之前，否则无效</p>
<ol>
<li><p>在Tomcat的service.xml中URIEncoding=UTF-8已经设置过编码了，所以，使用get请求传递参数时，不会出现中文乱码(这个是可以一次操作，终身解决的)。</p>
</li>
<li><p>使用post请求传递参数时，DispatcherServlet会去获取请求参数，对已经获取的请求设置请求的编码格式毫无意义，并不会改变编码格式，所以使用request.setEncodingChara-cter没用。也就是说，要在前端控制器获取请求之前，设置传递的编码格式。也就是比Ser-vlet执行更早的组件，需要配置过滤器(Tomcat三大组件加载顺序：监听器、过滤器、Serv-let，由于监听器起到监听作用，监听ServletContext，就是监听创建和销毁，即只执行一次。但过滤器，只要满足设置过的过滤路径，都会进行处理。设置后，每一次发送请求，都会经过过滤器的处理，再交给DisatcherServlet用。由于加载顺序的存在，web.xml中Filter和Servlet配置的前后顺序不产生影响。)</p>
</li>
</ol>
</blockquote>
<h1 id="五、域对象共享数据"><a href="#五、域对象共享数据" class="headerlink" title="五、域对象共享数据"></a>五、域对象共享数据</h1><h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>servletcontext(上下文对象)在整个应用范围内有效，也就是服务器开启到服务器关闭这段时间(只创建一次，与浏览器是否关闭无关)。</p>
<p>session在整个浏览器范围内有效，也就是浏览器开启和浏览器关闭这段时间(也就是其中数据与服务器是否关闭无关)。</p>
<p>session中有钝化(服务器关闭，而浏览器未关闭，即会话仍在继续，那么这时，存储在session上的数据，会经过序列化，保存到磁盘上)和活化(浏览器仍未关闭，但服务器重新开启，将钝化过的内容，重新读取到session中)。</p>
<p>只要JSESSIONID所依赖的这个Cookie存在，那么在当前会话中所创建的session，永远都是同一个。</p>
<h2 id="选择域对象"><a href="#选择域对象" class="headerlink" title="选择域对象"></a>选择域对象</h2><p>选择一个能实现功能的，范围最小的(不会浪费资源)。</p>
<h2 id="使用servletAPI向request域对象共享数据"><a href="#使用servletAPI向request域对象共享数据" class="headerlink" title="使用servletAPI向request域对象共享数据"></a>使用servletAPI向request域对象共享数据</h2><p>原生servletAPI，少用咯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequest</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello, servletAPI&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;p th:text=<span class="string">&quot;$&#123;testRequestScope&#125;&quot;</span>&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>先调用控制器方法TestController显示出index.html界面，点击超链接，经由thymeleaf视图解析后，跳转到success.html界面，将testServletScope中已经request.setAttribute( )过的域对象，显示出来。</p>
<h2 id="使用ModelAndView向request域对象共享数据-建议用"><a href="#使用ModelAndView向request域对象共享数据-建议用" class="headerlink" title="使用ModelAndView向request域对象共享数据(建议用)"></a>使用ModelAndView向request域对象共享数据(建议用)</h2><h3 id="分解"><a href="#分解" class="headerlink" title="分解"></a>分解</h3><p>SpringMVC提供。</p>
<p>ModelAndView有Model和View的功能</p>
<p><strong>Model主要指的是，向域对象中共享的数据。</strong></p>
<p><strong>View就是视图，指的就是设置好的视图名称。经过视图解析，实现跳转到的指定页面。</strong></p>
<p>不管用什么方法共享数据，最终都会将Model和View封装到ModelAndView这个对象中。</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>向request域对象共享数据，设置视图名称。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelAndView&quot;)</span></span><br><span class="line"><span class="comment">// 返回值必须是ModelAndView，将其交给视图解析器进行解析</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">// 处理模型数据，向request共享数据</span></span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;Hello, ModelAndView&quot;</span>);</span><br><span class="line">    <span class="comment">// 设置视图名称</span></span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Model向request域对象共享数据"><a href="#使用Model向request域对象共享数据" class="headerlink" title="使用Model向request域对象共享数据"></a>使用Model向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModel&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;Hello, Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用map向request域对象共享数据"><a href="#使用map向request域对象共享数据" class="headerlink" title="使用map向request域对象共享数据"></a>使用map向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">    map.put(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;Hello, Map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用ModelMap向request域对象共享数据"><a href="#使用ModelMap向request域对象共享数据" class="headerlink" title="使用ModelMap向request域对象共享数据"></a>使用ModelMap向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span> &#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;Hello, ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Model、ModelMap、Map的关系"><a href="#Model、ModelMap、Map的关系" class="headerlink" title="Model、ModelMap、Map的关系"></a>Model、ModelMap、Map的关系</h2><p>Model、ModelMap、Map类型的参数，本质上都是BindingAwareModelMap类型的(通过Model.getClass().-getName()得到的)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Map</span> &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Model</span> &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModelMap</span> <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;String, Object&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendedModelMap</span> <span class="keyword">extends</span> <span class="title class_">ModelMap</span> <span class="keyword">implements</span> <span class="title class_">Mode</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BindingAwareModelMap</span> <span class="keyword">extends</span> <span class="title class_">ExtendedModelMap</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>以上四个方法，都会将模型数据和视图信息封装到一个ModelAndView中，类似：</p>
<p><img src="https://s2.loli.net/2022/02/13/31efY4PZjwzpgik.png" alt="image-20220213205722225"></p>
<h2 id="向session域共享数据"><a href="#向session域共享数据" class="headerlink" title="向session域共享数据"></a>向session域共享数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span> &#123;</span><br><span class="line">	session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;Hello, session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="向application域共享数据"><a href="#向application域共享数据" class="headerlink" title="向application域共享数据"></a>向application域共享数据</h2><p>整个工程中要共享的东西，才会放到application中，范围太大</p>
<p>一般都用request和session。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testApplication&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span> &#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    application.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>, <span class="string">&quot;Hello, application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="六、SpringMVC的视图"><a href="#六、SpringMVC的视图" class="headerlink" title="六、SpringMVC的视图"></a>六、SpringMVC的视图</h1><p>SpringMVC中的视图是View接口，视图的作用是渲染数据，将模型Model中的数据展示给用户。</p>
<p>SpringMVC视图的种类有很多，默认有转发视图InternalResourceView和重定向视图RedirectView。</p>
<p>当工程引入jstl的以来，转发视图会自动转换为jstlView</p>
<p>若使用的视图技术为Thymeleaf，在SpringMVC的配置文件中配置了Thymeleaf的视图解析器，由此视图解析器解析之后所得到的是ThymeleafView</p>
<h2 id="1-ThymeleafView"><a href="#1-ThymeleafView" class="headerlink" title="1. ThymeleafView"></a>1. ThymeleafView</h2><p>当<strong>控制器方法中所设置的视图名称没有任何前缀时</strong>，此时的视图名称会被SpringMVC配置文件中所配置的Thymeleaf视图解析器解析，视图名称拼接视图前缀和视图后缀所得到的最终路径，会通过<strong>转发的方式</strong>实现跳转。</p>
<p><img src="https://s2.loli.net/2022/02/14/C8cEGNuyWshHJpw.png" alt="image-20220214210804710"></p>
<h2 id="2-转发视图-用的不是很多"><a href="#2-转发视图-用的不是很多" class="headerlink" title="2. 转发视图(用的不是很多)"></a>2. 转发视图(用的不是很多)</h2><p>SpringMVC中默认的转发视图时InternalResourceView。</p>
<h3 id="情况："><a href="#情况：" class="headerlink" title="情况："></a>情况：</h3><p>当控制器方法中所设置的<strong>视图名称以”forward:”为前缀</strong>时，创建InternalResourceView视图，此时的视图名称不会被SpringMVC配置文件中的所配置的视图解析器解析，而是会将前缀”forward:”去掉，剩余部分作为最终路径通过<strong>转发的方式</strong>实现跳转。</p>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><p><img src="https://s2.loli.net/2022/02/14/fVYiyWm8usU6NnA.png" alt="image-20220214214405141"></p>
<p><img src="https://s2.loli.net/2022/02/14/MnI9qFLlfKmspPX.png" alt="image-20220214214501985"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ViewController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testThymeleafView&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testThymeleafView</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 转发了一个请求，创建了两个请求</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/testThymeleafView&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tips"><a href="#tips" class="headerlink" title="tips:"></a>tips:</h3><p>只能转发到一个请求，不能直接”forward:”到一个html页面(因为页面必须通过服务器访问，通过转发访问)。</p>
<p>因为Thymeleaf本身就是转发的方式，所以说，这个转发视图用的不多。</p>
<h2 id="3-重定向视图"><a href="#3-重定向视图" class="headerlink" title="3. 重定向视图"></a>3. 重定向视图</h2><p>SpringMVC中默认的重定向视图时RedirectView。</p>
<h3 id="情况"><a href="#情况" class="headerlink" title="情况"></a>情况</h3><p>当控制器方法中所设置的视图名称以”redirect”为前缀时，创建RedirectView视图，此时视图的名称不会被SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀”redirect”去掉，剩余部分作为最终路径通过<strong>重定向的方式</strong>实现跳转。</p>
<h3 id="转发和重定向区别"><a href="#转发和重定向区别" class="headerlink" title="转发和重定向区别"></a>转发和重定向区别</h3><p>转发浏览器只发送一次请求(发生在服务器内部，只能访问内部的页面)，重定向发送两次请求(可以访问服务器外的页面)。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>页面都在WEB-INF下，而WEB-INF下的内容，重定向是无法访问的。再说了现在的页面，都要经过Thymeleaf解析，所以要通过转发去访问Thymeleaf视图，所以要重定向一个请求。</p>
<p><img src="https://s2.loli.net/2022/02/14/ljSBqPiWKIbC7Gt.png" alt="image-20220214220417979"></p>
<p><img src="https://s2.loli.net/2022/02/14/MnI9qFLlfKmspPX.png" alt="image-20220214214501985"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRedirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/testThymeleafView&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结果对比"><a href="#结果对比" class="headerlink" title="结果对比"></a>结果对比</h3><p><img src="https://s2.loli.net/2022/02/14/yHB8N3ezGEmfW7c.png" alt="image-20220214221223092"></p>
<h4 id="转发时"><a href="#转发时" class="headerlink" title="转发时"></a>转发时</h4><p><img src="https://s2.loli.net/2022/02/14/kGmHx1worAKcFQR.png" alt="image-20220214220956997"></p>
<h4 id="重定向时"><a href="#重定向时" class="headerlink" title="重定向时"></a>重定向时</h4><p><img src="https://s2.loli.net/2022/02/14/D8L4e2MHRk3mElG.png" alt="image-20220214221046150"> </p>
<p>也就是说，虽然发送了一样的请求。</p>
<p>但是转发和重定向，一个，地址栏的地址直接对应的是原请求，即/testForward；而另一个，地址栏的地址变化了，从/testRedirect跳转到了对应的/testThymeleafView。</p>
<h2 id="4-视图控制器view-controller-注意"><a href="#4-视图控制器view-controller-注意" class="headerlink" title="4. 视图控制器view-controller(注意)"></a>4. 视图控制器view-controller(注意)</h2><p>当控制器方法中，仅仅用来实现页面跳转，即只需要设置各种视图名称时，可以将处理器方法使用view-controller标签进行表示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    path：设置处理的请求地址</span><br><span class="line">    view-name：设置请求地址对应的视图名称</span><br><span class="line">--&gt;</span><br><span class="line">&lt;mvc:view-controller path=<span class="string">&quot;/testview&quot;</span> view-name=<span class="string">&quot;success&quot;</span>&gt;&lt;/mvc:view-controller&gt;</span><br></pre></td></tr></table></figure>
<h3 id="tips："><a href="#tips：" class="headerlink" title="tips："></a>tips：</h3><p>当Springmvc中设置任何一个view-controller时，<strong>控制器中的请求映射将全部失效</strong>。</p>
<p>此时需要在SpringMVC的核心配置文件中设置开启mvc注解驱动的标签：</p>
<p><code>&lt;mvc:annotation-driven /&gt;</code></p>
<h1 id="七、RESTFul"><a href="#七、RESTFul" class="headerlink" title="七、RESTFul"></a>七、RESTFul</h1><p>REST： Representational State Transfer，表现层(视图+控制层)资源状态转移。</p>
<h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><p>资源是一种看待服务器的方式，即，将服务器看作是由很多离散的资源组成。</p>
<p>每个资源是服务器上一个可命名的抽象概念，它不仅仅代表服务器文件系统中的一个文件等具体的东西。</p>
<p><strong>资源是以名词为核心来组织的。</strong></p>
<p>首先关注的是名词，一个资源可以由一个或多个URI(统一资源定位符)来标识。URI既是资源的名称，也是资源在Web上的地址，对这个资源感兴趣的客户端应用，可以通过资源的URI与其进行交互。</p>
<p>就，知道了要操作的资源是什么，为这个资源设置一个名词，则可以实现通过同一个请求路径实现不同的操作。</p>
<h3 id="资源的表述"><a href="#资源的表述" class="headerlink" title="资源的表述"></a>资源的表述</h3><p>资源的表示是对于资源在某个特定时刻的状态的描述。可以在客户端-服务器之间转移(交换)。</p>
<p>资源的表述可以有多种格式，如HTML/XML/JSON/纯文本/音频等。</p>
<p>资源的表述格式可以通过协商机制来确定。请求-响应的表述通常使用不同的格式。</p>
<h3 id="状态转移"><a href="#状态转移" class="headerlink" title="状态转移"></a>状态转移</h3><p>状态转移说的是，在客户端和服务器之间转移 (transfer)代表资源状态的 表述(向服务器发送请求，请求什么，服务器就返回什么资源)。通过转移和操作资源的表述(请求路径)，来间接实现操作资源的目的。</p>
<h2 id="2-RESTFul的实现"><a href="#2-RESTFul的实现" class="headerlink" title="2. RESTFul的实现"></a>2. RESTFul的实现</h2><p>具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET(查找)、POST(添加)、PUT(修改)、DELETE(删除)。</p>
<p>REST风格提倡URL地址使用统一的风格设计，<strong>从前到后各个单词使用斜杠分开</strong>，<strong>不使用问号键值对方式携带请求参数</strong>，而是将要发送给服务器的数据作为URL地址的一部分，以保证整体风格的意志。</p>
<p><img src="https://s2.loli.net/2022/02/15/ode2uAYIN8MZvET.png" alt="image-20220215234057710"></p>
<h2 id="3-HiddenHttpMethodFilter"><a href="#3-HiddenHttpMethodFilter" class="headerlink" title="3. HiddenHttpMethodFilter"></a>3. HiddenHttpMethodFilter</h2><p>由于浏览器只支持发送get和post请求，那么如何发送put和delete请求呢？</p>
<p>SpringMVC提供了HiddenHttpMethodFilter来将POST请求转换为DELETE和PUT请求。</p>
<p>要有初始化、执行过滤(重要)、销毁生命周期三个方法。</p>
<p><img src="https://s2.loli.net/2022/02/16/EFekI3uJUSP7gwc.png" alt="image-20220216211605226"></p>
<p>当前过滤器要拦截的请求和响应</p>
<p>获取当前请求的请求方式</p>
<h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><p><img src="https://s2.loli.net/2022/02/16/bgBsTR47icAuYIW.png" alt="image-20220216213429236"></p>
<ul>
<li>当前请求方式必须为post</li>
<li>当前请求必须传输一个name为“_method”的参数</li>
</ul>
<h3 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h3><p>这个过滤器和设置编码的CharacterEncodingFilter的顺序：</p>
<p>一定是设置请求的编码的CharacterEncodingFilter在前边。在设置编码之前，不能获取任何请求参数。因为如果之前就获取了请求，那么之后对请求设置编码格式自然是无用的。</p>
<h1 id="八、RESTFul案例"><a href="#八、RESTFul案例" class="headerlink" title="八、RESTFul案例"></a>八、RESTFul案例</h1><h2 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h2><p>和传统CRUD一样，实现对员工信息的增删改查</p>
<h3 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h3><h4 id="1-配置pom-xml"><a href="#1-配置pom-xml" class="headerlink" title="1. 配置pom.xml"></a>1. 配置pom.xml</h4><p>引入依赖：<img src="https://s2.loli.net/2022/02/18/6yr8Ejm54sJBINd.png" alt="image-20220218203617354"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line">&lt;groupId&gt;com.test&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;springMVC-rest&lt;/artifactId&gt;</span><br><span class="line">&lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!-- SpringMVC --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">5.3</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 日志 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">1.2</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- ServletAPI --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">3.1</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">        &lt;!-- 表示当前的服务器中已经提供了servlet-api，不会存在于整合后的war包中 --&gt;</span><br><span class="line">        &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Spring5和Thymeleaf整合包 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">3.0</span><span class="number">.12</span>.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-配置web-xml-1"><a href="#2-配置web-xml-1" class="headerlink" title="2. 配置web.xml"></a>2. 配置web.xml</h4><h5 id="1-CharacterEncodingFilter"><a href="#1-CharacterEncodingFilter" class="headerlink" title="1. CharacterEncodingFilter"></a>1. CharacterEncodingFilter</h5><p>确定请求和响应的编码格式为UTF-8</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">    &lt;!-- 根据源码确定的 --&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-<span class="number">8</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;forceRequestEncoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;<span class="literal">true</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;forceResponseEncoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;<span class="literal">true</span>&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;<span class="comment">/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">&lt;/filter-mapping&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-HiddenHttpMethodFilter"><a href="#2-HiddenHttpMethodFilter" class="headerlink" title="2. HiddenHttpMethodFilter"></a>2. HiddenHttpMethodFilter</h5><p>确定DELETE和PUT两个请求方式可以得到处理</p>
<p>由于请求方式和参数是请求同名的情况下，确定对应的请求处理方式的依据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line">  &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">  &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;</span><br><span class="line">&lt;/filter&gt;</span><br><span class="line">  &lt;filter-mapping&gt;</span><br><span class="line">      &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</span><br><span class="line">      &lt;url-pattern&gt;<span class="comment">/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">  &lt;/filter-mapping&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-DispatcherServlet"><a href="#3-DispatcherServlet" class="headerlink" title="3. DispatcherServlet"></a>3. DispatcherServlet</h5><p>配置前端控制器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;!-- 设置使得SpringMVC的配置文件放置在工程中的resources文件夹下 --&gt;</span><br><span class="line">        &lt;param-name&gt;ContextConfigLocation&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    &lt;load-on-startup&gt;<span class="number">1</span>&lt;/load-on-startup&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<h4 id="3-建立控制器类xxController-java"><a href="#3-建立控制器类xxController-java" class="headerlink" title="3. 建立控制器类xxController.java"></a>3. 建立控制器类xxController.java</h4><p>用注解@Controller标识创建该控制器对象</p>
<h4 id="4-配置springMVC-xml"><a href="#4-配置springMVC-xml" class="headerlink" title="4. 配置springMVC.xml"></a>4. 配置springMVC.xml</h4><h5 id="1-注解扫描"><a href="#1-注解扫描" class="headerlink" title="1. 注解扫描"></a>1. 注解扫描</h5><h5 id="2-配置视图解析器"><a href="#2-配置视图解析器" class="headerlink" title="2. 配置视图解析器"></a>2. 配置视图解析器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.test&quot;</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 配置视图解析器 --&gt;</span><br><span class="line">&lt;bean id=<span class="string">&quot;viewResolver&quot;</span> class=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span><br><span class="line">    &lt;!-- 视图解析的优先级 --&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;order&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;characterEncoding&quot;</span> value=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;templateEngine&quot;</span>&gt;</span><br><span class="line">        &lt;bean class=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;templateResolver&quot;</span>&gt;</span><br><span class="line">                &lt;!-- 解析策略 --&gt;</span><br><span class="line">                &lt;bean class=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span><br><span class="line">                    &lt;!-- 视图前缀 --&gt;</span><br><span class="line">                    &lt;property name=<span class="string">&quot;prefix&quot;</span> value=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span><br><span class="line">                    &lt;!-- 视图后缀 --&gt;</span><br><span class="line">                    &lt;property name=<span class="string">&quot;suffix&quot;</span> value=<span class="string">&quot;.html&quot;</span>/&gt;</span><br><span class="line">                    &lt;property name=<span class="string">&quot;templateMode&quot;</span> value=<span class="string">&quot;HTML5&quot;</span>/&gt;</span><br><span class="line">                    &lt;property name=<span class="string">&quot;characterEncoding&quot;</span> value=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span><br><span class="line">                &lt;/bean&gt;</span><br><span class="line">            &lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-准备实体类"><a href="#2-准备实体类" class="headerlink" title="2. 准备实体类"></a>2. 准备实体类</h3><h4 id="1-bean包"><a href="#1-bean包" class="headerlink" title="1. bean包"></a>1. bean包</h4><p>放置实体类(属性、无参构造、有参构造、toString()、getXX()、setXX())</p>
<h4 id="2-Dao包"><a href="#2-Dao包" class="headerlink" title="2. Dao包"></a>2. Dao包</h4><p>代表持久化层、数据访问层，操作数据库的各种方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        employees = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Employee&gt;();</span><br><span class="line"></span><br><span class="line">        employees.put(<span class="number">1001</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>, <span class="string">&quot;E-AA&quot;</span>, <span class="string">&quot;aa@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">        employees.put(<span class="number">1002</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;E-BB&quot;</span>, <span class="string">&quot;bb@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">        employees.put(<span class="number">1003</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1003</span>, <span class="string">&quot;E-CC&quot;</span>, <span class="string">&quot;cc@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        employees.put(<span class="number">1004</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1004</span>, <span class="string">&quot;E-DD&quot;</span>, <span class="string">&quot;dd@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        employees.put(<span class="number">1005</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1005</span>, <span class="string">&quot;E-EE&quot;</span>, <span class="string">&quot;ee@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Integer</span> <span class="variable">initId</span> <span class="operator">=</span> <span class="number">1006</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (employee.getId() == <span class="literal">null</span>) &#123;</span><br><span class="line">            employee.setId(initId++);</span><br><span class="line">        &#125;</span><br><span class="line">        employees.put(employee.getId(), employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employees.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employees.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        employees.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-Controller包"><a href="#3-Controller包" class="headerlink" title="3. Controller包"></a>3. Controller包</h4><p>有关的控制器方法</p>
<p>设置资源的名称为employee</p>
<h2 id="2-功能清单"><a href="#2-功能清单" class="headerlink" title="2. 功能清单"></a>2. 功能清单</h2><p>根据请求方式来实现不同功能</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>功能</th>
<th>URL地址</th>
<th>请求方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>访问首页</td>
<td>/</td>
<td>GET</td>
</tr>
<tr>
<td>查询全部数据</td>
<td>/employee</td>
<td>GET</td>
</tr>
<tr>
<td>删除</td>
<td>/employee/2</td>
<td>DELETE</td>
</tr>
<tr>
<td>跳转到添加数据页面</td>
<td>/toAdd</td>
<td>GET</td>
</tr>
<tr>
<td>执行保存</td>
<td>/employee</td>
<td>POST</td>
</tr>
<tr>
<td>跳转到更新数据页面</td>
<td>/employee/3</td>
<td>GET</td>
</tr>
<tr>
<td>执行更新</td>
<td>/employee</td>
<td>PUT</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-查询所有员工"><a href="#3-查询所有员工" class="headerlink" title="3. 查询所有员工"></a>3. 查询所有员工</h2><p>请求方式为get。</p>
<h3 id="操作：访问首页"><a href="#操作：访问首页" class="headerlink" title="操作：访问首页(*)"></a>操作：访问首页(*)</h3><h4 id="配置springMVC-xml"><a href="#配置springMVC-xml" class="headerlink" title="配置springMVC.xml"></a>配置springMVC.xml</h4><h5 id="1-视图控制器"><a href="#1-视图控制器" class="headerlink" title="1. 视图控制器"></a>1. 视图控制器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置视图控制器 --&gt;</span><br><span class="line">&lt;mvc:view-controller path=<span class="string">&quot;/&quot;</span> view-name=<span class="string">&quot;index&quot;</span>&gt;&lt;/mvc:view-controller&gt;</span><br><span class="line">&lt;mvc:view-controller path=<span class="string">&quot;/toAdd&quot;</span> view-name=<span class="string">&quot;employee_add&quot;</span>&gt;&lt;/mvc:view-controller&gt;</span><br></pre></td></tr></table></figure>
<h5 id="2-访问驱动器"><a href="#2-访问驱动器" class="headerlink" title="2. 访问驱动器"></a>2. 访问驱动器</h5><p>必须要配置，否则除了在视图控制器中声明的请求映射之外，别的在控制器中的请求映射，将无法被处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven /&gt;</span><br></pre></td></tr></table></figure>
<h5 id="3-html页面"><a href="#3-html页面" class="headerlink" title="3. html页面"></a>3. html页面</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span>&gt;</span>查看员工信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-html页面"><a href="#1-html页面" class="headerlink" title="1. html页面"></a>1. html页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Employee Information<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;dataTable&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>Employee Information<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>options (<span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toAdd&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span>) <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 每次都要循环一行信息，在tr中使用th: 。又因为数据保存在请求域中，所以用$&#123; &#125;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;employeeList&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 如果写在&lt;td&gt;$&#123; &#125;&lt;/td&gt;的话，会被当成文本输出，而不是被解析--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 通过超链接来控制一个表单的提交方式，通过vue来处理为其绑定的事件， form表单才是最终的提交方式 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27; + $&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;deleteForm&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>:<span class="string">&quot;#dataTable&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">deleteEmployee</span>:<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 根据id获取表单元素</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> deleteForm = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;deleteForm&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 将触发点击事件的超链接的href属性赋值给表单的action</span></span></span><br><span class="line"><span class="language-javascript">                    deleteForm.<span class="property">action</span> = event.<span class="property">target</span>.<span class="property">href</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 提交表单</span></span></span><br><span class="line"><span class="language-javascript">                    deleteForm.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 取消超链接的默认行为</span></span></span><br><span class="line"><span class="language-javascript">                    event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-控制器"><a href="#2-控制器" class="headerlink" title="2. 控制器"></a>2. 控制器</h3><p>主要调用了getAll( )方法，将数据库中的数据读取。</p>
<p>之后设置了构成ModelAndView的数据employeeList和(返回了)视图employee_list。</p>
<p>此处的域对象是请求域，因为每次显示数据都需要重新进行查找，所以说这些数据只需在一次请求中有效即可。</p>
<p>选取域对象，要选能实现预期功能的且范围最小的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAllEmployees</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    Collection&lt;Employee&gt; employeeList = employeeDao.getAll();</span><br><span class="line">    <span class="comment">// 因为每次都需要重新查，只需在一次请求中有效即可，否则占空间</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;employeeList&quot;</span>, employeeList);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-删除"><a href="#4-删除" class="headerlink" title="4. 删除"></a>4. 删除</h2><p>比较麻烦。</p>
<p>请求方式为delete。</p>
<h3 id="0-思路"><a href="#0-思路" class="headerlink" title="0. 思路"></a>0. 思路</h3><p>首先将delete的超链接绑定到一个表单提交的事件，通过设置表单的提交方式为post并配置参数_method，可以使用HiddenHttpMethodFilter过滤器，将其转换为delete请求方式。</p>
<h3 id="1-设置表单"><a href="#1-设置表单" class="headerlink" title="1. 设置表单"></a>1. 设置表单</h3><ol>
<li>提交方式为post</li>
<li>设置_method参数的值为请求方式delete</li>
</ol>
<p><img src="C:\Users\LISHANSHAN\AppData\Roaming\Typora\typora-user-images\image-20220218224140190.png" alt="image-20220218224140190"></p>
<h3 id="2-vue设置超链接"><a href="#2-vue设置超链接" class="headerlink" title="2. vue设置超链接"></a>2. vue设置超链接</h3><p>因为在表格中，delete通常是以超链接的形式存在。但是要想发送并能处理这个DELETE请求方式，就必须要通过表单提交的方式(根据HiddenHttpFilter的源码可得)。</p>
<p>所以，这里使用了vue，采取了将超链接绑定一个表单提交的事件的方式，之后通过在控制器中匹配请求名称和请求方式，执行相关的方法。</p>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><p>首先根据id获取表单元素</p>
<p>将待点击的超链接的href属性(event.target.href)赋值给表单的action</p>
<p>提交表单.submit( )</p>
<p>取消超链接的默认行为(preventDefaukt( ))。</p>
<p>特别，注意取消超链接默认的点击后跳转行为，否则绑定不生效。</p>
<p><img src="https://s2.loli.net/2022/02/18/oVyTPIF34m8WS7v.png" alt="image-20220218223510735"></p>
<h3 id="3-设置请求格式"><a href="#3-设置请求格式" class="headerlink" title="3. 设置请求格式"></a>3. 设置请求格式</h3><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>采用的发送请求的方式为：通过”/“将参数跟到地址后。</p>
<p>所以要实现在超链接点击后，发送的请求中，要有对应的员工id。</p>
<p><strong>使用Thymeleaf视图解析器的方式，通过增加可解析的参数表达式实现。</strong></p>
<h4 id="错误方式"><a href="#错误方式" class="headerlink" title="错误方式"></a>错误方式</h4><p><img src="https://s2.loli.net/2022/02/17/q9Mnkg3FVoYmQi8.png" alt="image-20220217233308716"></p>
<p><img src="https://s2.loli.net/2022/02/17/WAx37uF6CTotYN1.png" alt="image-20220217233359456"></p>
<p><img src="https://s2.loli.net/2022/02/17/X7VEG1hQabJMnuT.png" alt="image-20220217233427223"></p>
<p>这种写法是错误的，此时只将左右大括号进行了解析，而没有解析表达式(虽不知为何会如此)。</p>
<h4 id="正确方式1："><a href="#正确方式1：" class="headerlink" title="正确方式1："></a>正确方式1：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 放在外边 --&gt;</span><br><span class="line">&lt;a th:href=<span class="string">&quot;@&#123;/employee/&#125; + $&#123;employee.id&#125;&quot;</span>&gt;delete&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h4 id="正确方式2："><a href="#正确方式2：" class="headerlink" title="正确方式2："></a>正确方式2：</h4><p>前边的会作为路径解析，后边的作为请求参数解析。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 放在里边 --&gt;</span><br><span class="line">&lt;a th:href=<span class="string">&quot;@&#123; &#x27;/employee/&#x27;+$&#123;employee.id&#125; &#125;&quot;</span>&gt;delete&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-控制器"><a href="#4-控制器" class="headerlink" title="4. 控制器"></a>4. 控制器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deleteEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">// 将占位符的值和当前形参进行绑定</span></span><br><span class="line">    employeeDao.delete(id);</span><br><span class="line">    <span class="comment">// 删除成功后，再展示数据，与原来的请求无关，故而采用重定向</span></span><br><span class="line">    <span class="comment">// 下面这样，类似于在地址栏重新输入地址，是get方式</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-Tips"><a href="#5-Tips" class="headerlink" title="5. Tips"></a>5. Tips</h3><p>解决当时遇到的405 请求方式无法解析的问题。</p>
<h4 id="1-打包"><a href="#1-打包" class="headerlink" title="1. 打包"></a>1. 打包</h4><p>借助vue.js，将超链接绑定一个表单提交事件的配置没有生效。</p>
<p>因为是在工程运行打包之后，又增加的vue.js文件。所以在当前已经打包过的资源中，它不存在，需要重新打包。</p>
<p>如下图所示：</p>
<p><img src="https://s2.loli.net/2022/02/18/4ZqrSvm1z6wjIbD.png" alt="image-20220218225905824"></p>
<h4 id="2-配置默认的servlet"><a href="#2-配置默认的servlet" class="headerlink" title="2. 配置默认的servlet"></a>2. 配置默认的servlet</h4><p>SpringMVC无法处理静态资源。</p>
<p>所以在重新打包，保证新引入的vue.js文件在打好的war包中后，仍旧会报 404 not found 的问题。</p>
<p>静态资源是要靠默认的servlet来处理的，故而需要在SpringMVC中新增配置，开放对静态资源的访问。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:<span class="keyword">default</span>-servlet-handler /&gt;</span><br></pre></td></tr></table></figure>
<p>加上之后，所有的请求都会先被DispatcherServlet首先处理，如果找不到对应的请求映射，就会交给默认的servlet处理。</p>
<p>如果默认的servlet可以处理，那就访问，找不到的话，就提示404。</p>
<h5 id="注意-2"><a href="#注意-2" class="headerlink" title="注意"></a>注意</h5><p>当然，此时一定要加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven /&gt;</span><br></pre></td></tr></table></figure>
<p>如果不加的话，所有的请求都会被默认的servlet处理。</p>
<h2 id="5-添加"><a href="#5-添加" class="headerlink" title="5. 添加"></a>5. 添加</h2><p>请求方式为post</p>
<h3 id="0-思路-1"><a href="#0-思路-1" class="headerlink" title="0. 思路"></a>0. 思路</h3><p>先跳转到toAdd.html页面，将数据从表单中提交，之后通过在控制器中匹配请求名称和请求方式，执行相关的方法。</p>
<h3 id="1-html页面-1"><a href="#1-html页面-1" class="headerlink" title="1. html页面"></a>1. html页面</h3><p><img src="https://s2.loli.net/2022/02/18/ztSKYaZBFbvHrgp.png" alt="image-20220218233019137"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Add Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    lastName: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    email: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    gender: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>male</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>female<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;add&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-控制器-1"><a href="#2-控制器-1" class="headerlink" title="2. 控制器"></a>2. 控制器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-修改"><a href="#6-修改" class="headerlink" title="6. 修改"></a>6. 修改</h2><p>跟delete差不多，但是因为它有独立的页面，可以执行表单提交，所以不用将超链接绑定表单提交事件。</p>
<p>请求方式为put。</p>
<h3 id="0-思路-2"><a href="#0-思路-2" class="headerlink" title="0. 思路"></a>0. 思路</h3><p>首先点击add超链接，根据提交的请求名和请求方式(超链接默认的请求方式是get)，找到第一个控制器方法</p>
<p>进入employee_update页面，回显信息，修改之后，提交信息，找到第二个控制器方法，显示当前所有员工。</p>
<h3 id="1-html页面-2"><a href="#1-html页面-2" class="headerlink" title="1. html页面"></a>1. html页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Update Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span></span><br><span class="line">    lastName: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    email: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    gender: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>male</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span>female<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;update&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-控制器方法"><a href="#2-控制器方法" class="headerlink" title="2. 控制器方法"></a>2. 控制器方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmployeeById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span> &#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeDao.get(id);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employee&quot;</span>, employee);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_update&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateEmployee</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.save(employee);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>所有工程的web.xml文件在Tomcat的conf文件夹中。</p>
<p>若自己工程配置的web.xml，与所有工程的不同(产生冲突)，以就近为准，选择自己的。</p>
<h1 id="九、-HttpMessageConverter"><a href="#九、-HttpMessageConverter" class="headerlink" title="九、 HttpMessageConverter"></a>九、 HttpMessageConverter</h1><p>HttpMessageConverter，报文信息转换器，将请求报文转换为Java对象(要通过Java接收报文)，或将Java对象转换为响应报文(服务器用的是Java语言，但浏览器只能接收响应报文)。</p>
<p>提供了两个注解和两个类型</p>
<p>@RequestBody(将请求报文中的请求体转化为Java对象)</p>
<p><strong>@ResponseBody</strong>(将Java对象转换为响应体)</p>
<p>RequestEntity(请求实体，可以用来接收整个请求报文，既可以用来接受请求头，还能接收请求体)</p>
<p><strong>ResponseEntity</strong>(将Java数据转化为响应报文)。</p>
<p>两个请求用的少，因为请求就可以随便获取。</p>
<p>黑体的两个响应用的多，因为将Java转换为响应报文，用起来会很方便。</p>
<h2 id="1-RequestBody"><a href="#1-RequestBody" class="headerlink" title="1. @RequestBody"></a>1. @RequestBody</h2><p>@RequestBody可以获取请求体，需要在控制器方式设置一个形参，使用@RequestBody进行标识，当前请求的请求体就会为当前注解所标识的形参赋值。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testRequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> String requestBody)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody: &quot;</span> + requestBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="C:\Users\LISHANSHAN\AppData\Roaming\Typora\typora-user-images\image-20220219163030353.png" alt="image-20220219163030353"></p>
<h2 id="2-RequestEntity"><a href="#2-RequestEntity" class="headerlink" title="2. RequestEntity"></a>2. RequestEntity</h2><p>RequestEntity封装请求报文的一种类型，需要在控制器方法的形参中设置该类型的形参，当前请求的请求报文就会赋值给该形参，可以通过getHeaders( )获取请求头信息，通过getBody( )获取请求体信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestEntity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestEntity</span><span class="params">(RequestEntity&lt;String&gt; requestEntity)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestHeader: &quot;</span> + requestEntity.getHeaders());</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody: &quot;</span> + requestEntity.getBody());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/02/19/V3SJZAkdEe45aFb.png" alt="image-20220219170728090"></p>
<h2 id="3-ResponseBody"><a href="#3-ResponseBody" class="headerlink" title="3. @ResponseBody"></a>3. @ResponseBody</h2><p>@RequestBody用于标识一个控制器方法，可以将该方法的返回值直接作为响应报文的响应体响应到浏览器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseBody&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testResponseBody</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>若不加注解，则返回的是视图名称；</p>
<p>加上注解之后，返回的是响应体的内容success。</p>
<p><img src="https://s2.loli.net/2022/02/19/nvm8gT4BW37z1US.png" alt="image-20220219172826712"></p>
<h2 id="4-SpringMVC处理Json"><a href="#4-SpringMVC处理Json" class="headerlink" title="4. SpringMVC处理Json"></a>4. SpringMVC处理Json</h2><p>到目前为止都只能return一个(字符串)文本内容，因为浏览器只能接收服务器传过来的字符串内容，它不认识Java对象，也不知道服务器用的什么语言。这是因为Http协议为服务器和浏览器之间制定了一个统一的通信规范，跟浏览器和服务器语言无关，只要按照要求传输请求报文和响应报文就可以实现通信，故而这也导致浏览器并不清楚服务器的处理方式。</p>
<p>此时，如果传输对象(例如user)的话，会：</p>
<p><img src="https://s2.loli.net/2022/02/19/kuEdqOGUeigb8LQ.png" alt="image-20220219214430230"></p>
<p>为了实现顺利传输，使用json。</p>
<p>JSON是一种数据交互格式。</p>
<h3 id="1-引入jackson依赖"><a href="#1-引入jackson依赖" class="headerlink" title="1. 引入jackson依赖"></a>1. 引入jackson依赖</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.12</span><span class="number">.5</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/02/19/Dxa8i2qvmybwGlH.png" alt="image-20220219214859189"></p>
<p>此时user对象转换为json时，转换的是json对象(最外层是{ }，数组(最外层是[ ]))。</p>
<h3 id="2-开启mvc的注解驱动"><a href="#2-开启mvc的注解驱动" class="headerlink" title="2. 开启mvc的注解驱动"></a>2. 开启mvc的注解驱动</h3><p>在SpringMVC的核心配置文件中开启mvc的注解驱动，此时在HandlerAdaptor中会自动装配一个消息转换器：MappingJacksonHttpMessageConverter，可以将响应到浏览器的Java对象转换为Json格式的字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-ResponseBody注解"><a href="#3-ResponseBody注解" class="headerlink" title="3. @ResponseBody注解"></a>3. @ResponseBody注解</h3><h3 id="4-Java对象作为返回值"><a href="#4-Java对象作为返回值" class="headerlink" title="4. Java对象作为返回值"></a>4. Java对象作为返回值</h3><p>将Java对象直接作为控制器方法的返回值返回，就会自动转换为<strong>Json格式的字符串</strong></p>
<p><img src="https://s2.loli.net/2022/02/19/sDKpjTU6SOZ7kJd.png" alt="image-20220219215721022"></p>
<p>Json对象是放在{ }中，以键值对的方式存储；实体类、Map转换为Json之后，是Json对象。</p>
<p>Json数组是放在[ ]中，存储的是一个一个数据。 List集合是Json数组。</p>
<h2 id="5-SpringMVC处理Ajax"><a href="#5-SpringMVC处理Ajax" class="headerlink" title="5. SpringMVC处理Ajax"></a>5. SpringMVC处理Ajax</h2><p>Ajax本身就是页面不刷新，与服务器交互。所以现在在服务器中不能使用转发和重定向，只能响应浏览器数据。</p>
<p>通过超链接绑定Ajax，但是超链接有默认行为，所以要使用vue来取消。</p>
<p>服务器响应浏览器数据，就是在当前的方法上加上@ResponseBody，将返回的内容变成响应体。</p>
<h3 id="1-发送请求的超链接"><a href="#1-发送请求的超链接" class="headerlink" title="1. 发送请求的超链接"></a>1. 发送请求的超链接</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;testAxios&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testAxios&#125;&quot;</span>&gt;</span>SpringMVC处理ajax<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-通过vue和axios处理点击事件"><a href="#2-通过vue和axios处理点击事件" class="headerlink" title="2. 通过vue和axios处理点击事件"></a>2. 通过vue和axios处理点击事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">testAxios</span>:<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">method</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>:event.<span class="property">target</span>.<span class="property">href</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">params</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">username</span>:<span class="string">&quot;admin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">password</span>:<span class="string">&quot;123456&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(response.<span class="property">data</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-控制器方法"><a href="#3-控制器方法" class="headerlink" title="3. 控制器方法"></a>3. 控制器方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testAxios&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAxios</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">    System.out.println(username +<span class="string">&quot;,&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello, axios&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-RestController注解"><a href="#6-RestController注解" class="headerlink" title="6. @RestController注解(*)"></a>6. @RestController注解(*)</h2><p>@RestController注解是SpringMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了@Controller注解，并且为其中的每一个方法增加了@RequestBody注解。</p>
<h2 id="7-ResponseEntity"><a href="#7-ResponseEntity" class="headerlink" title="7. ResponseEntity"></a>7. ResponseEntity</h2><p>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是相应到浏览器的响应报文。</p>
<p>用于实现文件上传和下载。</p>
<h1 id="十、文件的上传和下载"><a href="#十、文件的上传和下载" class="headerlink" title="十、文件的上传和下载"></a>十、文件的上传和下载</h1><h2 id="1-文件下载"><a href="#1-文件下载" class="headerlink" title="1. 文件下载"></a>1. 文件下载</h2><p>使用ResponseEntity实现下载文件的功能</p>
<p>实现，自定义响应报文来响应浏览器</p>
<h3 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li>根据在工程中的相对路径，获取文件在服务器中的绝对路径</li>
<li>创建输入流，将文件通放入输入流</li>
<li>从输入流读文件进入字节数组</li>
<li>将字节数组中的数据，作为响应报文的响应体</li>
<li>创建响应头HttpHeaders()和响应状态码HttpStatus</li>
<li>将以上三部分，放入后构造器方法，创建ResponseEntity对象</li>
<li>关闭输入流</li>
<li>返回ResponseEntity对象作为响应报文</li>
</ol>
<p>inputStream.available()； headers.add(“Content-Disposition”, “attachment;filename=cherry.jpg”);</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- file.html --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 从服务器将文件下载到客户端；将文件上传到服务器中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testDown&#125;&quot;</span>&gt;</span>下载cherry<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUpAndDownController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testDown&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="comment">// getRealPath()获取服务器中的工程部署路径，从而获取服务器中文件的真实路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/static/img/cherry.jpg&quot;</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">// 文件复制就是先读后写</span></span><br><span class="line">        <span class="comment">// 创建输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">        <span class="comment">// 获取字节数组，输入流所对应的文件的所有字节，假如文件里有100个字节，那就是available方法的值就是100。</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[inputStream.available()];</span><br><span class="line">        <span class="comment">// 将流读到字节数组中</span></span><br><span class="line">        inputStream.read(bytes);</span><br><span class="line">        <span class="comment">// 将响应的内容byte数组(响应体)转化为ResponseEntity</span></span><br><span class="line">        <span class="comment">// 创建HttpHeaders对象设置响应头信息</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">        <span class="comment">// 设置要下载的方式(attachment:以附件的形式下载)和文件名称(整个语句，只能改文件名称)</span></span><br><span class="line">        headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=cherry.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置响应状态码为200</span></span><br><span class="line">        <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">        <span class="comment">// 创建ResponseEntity对象</span></span><br><span class="line">        ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">        <span class="comment">// 关闭输入流</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        <span class="keyword">return</span> responseEntity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-文件上传"><a href="#2-文件上传" class="headerlink" title="2. 文件上传"></a>2. 文件上传</h2><p>上传按照二进制方式，而不是name=value的映射方式。</p>
<p>post和multi-…一个都不能少，否则会完成不了上传。</p>
<p>显示一个按钮，点击后可以去选择文件。</p>
<p>获取表单属性的name元素值。</p>
<p>当前文件的名字</p>
<p>覆盖的是文件里的内容，当两个文件同名，后者将前者文件里的内容进行了覆盖。</p>
<p><img src="https://s2.loli.net/2022/02/21/hjz9eRDUJQKoY2E.png" alt="image-20220221001840497"></p>
<h1 id="十一、拦截器"><a href="#十一、拦截器" class="headerlink" title="十一、拦截器"></a>十一、拦截器</h1><h1 id="十二、异常处理器"><a href="#十二、异常处理器" class="headerlink" title="十二、异常处理器"></a>十二、异常处理器</h1><h1 id="末章-补充信息"><a href="#末章-补充信息" class="headerlink" title="末章 补充信息"></a>末章 补充信息</h1><h2 id="1-ServletContext介绍"><a href="#1-ServletContext介绍" class="headerlink" title="1. ServletContext介绍"></a>1. ServletContext介绍</h2><h3 id="1-简介-1"><a href="#1-简介-1" class="headerlink" title="1. 简介"></a>1. 简介</h3><p>ServletContext官方叫servlet上下文。</p>
<p>服务器会为每一个工程创建一个对象，这个对象就是ServletContext对象。这个对象全局唯一，而且工程内部的所有servlet都共享这个对象。所以叫，<strong>全局应用程序共享对象</strong>。</p>
<p><img src="https://s2.loli.net/2022/02/20/XrfVwxHI28oMdFO.png" alt="image-20220220123848890"></p>
<h3 id="2-作用"><a href="#2-作用" class="headerlink" title="2. 作用"></a>2. 作用</h3><ul>
<li><p><strong>是一个域对象</strong></p>
</li>
<li><p>可以读取全局配置参数</p>
</li>
<li>可以搜索当前工程目录下面的资源文件</li>
</ul>
<h4 id="1-域对象"><a href="#1-域对象" class="headerlink" title="1. 域对象"></a>1. 域对象</h4><p>域对象是服务器在内存上创建的存储空间，用于在不同动态资源(servlet)之间传递与共享数据。</p>
<h4 id="2-域对象方法"><a href="#2-域对象方法" class="headerlink" title="2. 域对象方法"></a>2. 域对象方法</h4><p>凡是域对象都有如下3个方法：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>setAttribute(name, value);name为String类型，value是Object类型；</td>
<td>向域对象中添加数据，以key-value形式</td>
</tr>
<tr>
<td>getAttribute(name)；</td>
<td>根据指定的key读取域对象中的数据</td>
</tr>
<tr>
<td>removeAttribute(name);</td>
<td>根据指定的key从域对象中删除数据</td>
</tr>
</tbody>
</table>
</div>
<h4 id="3-存储特点"><a href="#3-存储特点" class="headerlink" title="3. 存储特点"></a>3. 存储特点</h4><p>servletContext中的数据，全局共享，所有的动态资源都可以写入和获取</p>
<p>服务器启动的时候创建，服务器关闭的时候销毁，因为这是全局应用程序对象，全局共享对象。</p>
<h4 id="4-可以读取全局配置参数"><a href="#4-可以读取全局配置参数" class="headerlink" title="4. 可以读取全局配置参数"></a>4. 可以读取全局配置参数</h4><p>servletContext读取全局参数的核心方法：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>getServletContext().getInitParameter(name);</td>
<td>根据指定的参数名获取参数值</td>
</tr>
<tr>
<td>getServletContext().getInitParameterNames();</td>
<td>获取所有参数名称列表</td>
</tr>
</tbody>
</table>
</div>
<p> <img src="https://s2.loli.net/2022/02/20/xKa1uY6ReSy3ft9.png" alt="image-20220220144024285"></p>
<h4 id="5-搜索工程下资源文件"><a href="#5-搜索工程下资源文件" class="headerlink" title="5. 搜索工程下资源文件"></a>5. 搜索工程下资源文件</h4><p>path：相对路径</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>getServletContext().getRealPath(path);</td>
<td>根据相对路径获取服务器上资源的绝对路径</td>
</tr>
<tr>
<td>getServletContext().getResourceAsStream(path);</td>
<td>根据相对路径获取服务器上资源的输入字节流</td>
</tr>
</tbody>
</table>
</div>
<h4 id="6-获取当前工程名字"><a href="#6-获取当前工程名字" class="headerlink" title="6. 获取当前工程名字"></a>6. 获取当前工程名字</h4><p>getServletContext().getContextPath()：获取当前工程名字</p>
<h2 id="2-Servlet三大域对象"><a href="#2-Servlet三大域对象" class="headerlink" title="2. Servlet三大域对象"></a>2. Servlet三大域对象</h2><p>域对象的作用：保存数据、获取数据、共享数据。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>对象名称</th>
<th>对象的类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td>HttpServletRequest</td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
</tr>
<tr>
<td>application</td>
<td>ServletContext</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-request"><a href="#1-request" class="headerlink" title="1. request"></a>1. request</h3><p>创建：客户端向服务器发送一次请求，服务器就会创建request对象</p>
<p>销毁：服务器对这次请求做出响应之后就会销毁request对象</p>
<p>有效：仅在当前请求中有效</p>
<p>方法：request.getParameter(); request.setAttribute()。</p>
<h3 id="2-session"><a href="#2-session" class="headerlink" title="2. session"></a>2. session</h3><p>创建：服务器端第一次调用getSession()；(保存在服务器内存中)</p>
<p>销毁：</p>
<ul>
<li>非正常关闭服务器(正常关闭session会序列化，再次启动session会被反序列化)</li>
<li>session过期(Tomcat中为30分钟)</li>
<li>手动调用session.invalidate();</li>
</ul>
<p>有效：从用户打开浏览器会话开始，直到关闭浏览器会话结束。一次会话只创建一个session对象。</p>
<p>方法：(String) request.getSession().getAttribute(“imageMsg”); </p>
<p>request.getSession().setAttribute(“user”, user)；</p>
<h3 id="application"><a href="#application" class="headerlink" title="application"></a>application</h3><p>创建：服务器启动时，为每个web应用创建一个属于该项目的对象ServletContext类；</p>
<p>销毁：服务器关闭或项目从服务器中移除的时候</p>
<p>有效：此信息在整个服务器上被保留</p>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p><img src="https://s2.loli.net/2022/02/20/HAfMwiCgpSoX1nO.png" alt="image-20220220145904822"></p>
<h3 id="附：pageContext-jsp"><a href="#附：pageContext-jsp" class="headerlink" title="附：pageContext(jsp)"></a>附：pageContext(jsp)</h3><p>对象类型：pageContext</p>
<p>有效范围最小。</p>
<p>当前页面有效，超过这个页面就不能使用。</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/163/425570952.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">1.</span> <span class="toc-text">主要内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">一、简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MVC%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text">MVC的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#M"><span class="toc-number">2.1.1.</span> <span class="toc-text">M</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaBean%E7%9A%84%E4%B8%A4%E7%B1%BB"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">JavaBean的两类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#V"><span class="toc-number">2.1.2.</span> <span class="toc-text">V</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C"><span class="toc-number">2.1.3.</span> <span class="toc-text">C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.1.4.</span> <span class="toc-text">工作流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">2.2.</span> <span class="toc-text">SpringMVC的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.1.</span> <span class="toc-text">SpringMVC的特点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81HelloWorld"><span class="toc-number">3.</span> <span class="toc-text">二、HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-number">3.1.</span> <span class="toc-text">1. 创建maven工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%BB%93%E6%9E%9C"><span class="toc-number">3.1.1.</span> <span class="toc-text">依赖结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">3.2.</span> <span class="toc-text">2. 配置web.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#a-%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">a. 默认配置方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#b-%E6%8B%93%E5%B1%95%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F-%E5%B8%B8%E7%94%A8"><span class="toc-number">3.2.2.</span> <span class="toc-text">b. 拓展配置方式(常用)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">3.3.</span> <span class="toc-text">3. 创建请求控制器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%B0%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">4. 新建SpringMVC的配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95HelloWorld"><span class="toc-number">3.5.</span> <span class="toc-text">5. 测试HelloWorld</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%80%BB%E7%BB%93"><span class="toc-number">3.6.</span> <span class="toc-text">6. 总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81-RequestMapping%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text">三、@RequestMapping注解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">4.1.</span> <span class="toc-text">注解的功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">注解的位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84value%E5%B1%9E%E6%80%A7"><span class="toc-number">4.3.</span> <span class="toc-text">注解的value属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84method%E5%B1%9E%E6%80%A7"><span class="toc-number">4.4.</span> <span class="toc-text">注解的method属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84params%E5%B1%9E%E6%80%A7-%E4%BA%86%E8%A7%A3"><span class="toc-number">4.5.</span> <span class="toc-text">注解的params属性(了解)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E6%94%AF%E6%8C%81ant%E9%A3%8E%E6%A0%BC%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">4.6.</span> <span class="toc-text">SpringMVC支持ant风格的路径</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%9A"><span class="toc-number">4.6.1.</span> <span class="toc-text">?：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%9A-1"><span class="toc-number">4.6.2.</span> <span class="toc-text">*：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%9A-2"><span class="toc-number">4.6.3.</span> <span class="toc-text">**：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A-1"><span class="toc-number">4.6.3.1.</span> <span class="toc-text">注意：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E6%94%AF%E6%8C%81%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">4.7.</span> <span class="toc-text">SpringMVC支持路径中的占位符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E6%96%B9%E5%BC%8F"><span class="toc-number">4.7.1.</span> <span class="toc-text">原始方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#deleteUser-id-1"><span class="toc-number">4.7.1.1.</span> <span class="toc-text">&#x2F;deleteUser?id&#x3D;1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rest%E6%96%B9%E5%BC%8F"><span class="toc-number">4.7.2.</span> <span class="toc-text">rest方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#deleteUser-1"><span class="toc-number">4.7.2.1.</span> <span class="toc-text">&#x2F;deleteUser&#x2F;1</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SpringMVC%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">四、SpringMVC获取请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87ServletAPI%E8%8E%B7%E5%8F%96-%E4%B8%80%E8%88%AC%E4%B8%8D%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">通过ServletAPI获取(一般不用)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95%E7%9A%84%E5%BD%A2%E5%8F%82%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">通过控制器方法的形参获取请求参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8"><span class="toc-number">5.2.1.</span> <span class="toc-text">注</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestParam"><span class="toc-number">5.3.</span> <span class="toc-text">@RequestParam</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestHeader"><span class="toc-number">5.4.</span> <span class="toc-text">@RequestHeader</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CookieValue"><span class="toc-number">5.5.</span> <span class="toc-text">@CookieValue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87POJO%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">5.6.</span> <span class="toc-text">通过POJO获取请求参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">5.7.</span> <span class="toc-text">解决获取请求参数的乱码问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8-1"><span class="toc-number">5.7.1.</span> <span class="toc-text">注</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.</span> <span class="toc-text">五、域对象共享数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%8F%90"><span class="toc-number">6.1.</span> <span class="toc-text">前提</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.2.</span> <span class="toc-text">选择域对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8servletAPI%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.</span> <span class="toc-text">使用servletAPI向request域对象共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ModelAndView%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE-%E5%BB%BA%E8%AE%AE%E7%94%A8"><span class="toc-number">6.4.</span> <span class="toc-text">使用ModelAndView向request域对象共享数据(建议用)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E8%A7%A3"><span class="toc-number">6.4.1.</span> <span class="toc-text">分解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">6.4.2.</span> <span class="toc-text">作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Model%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.5.</span> <span class="toc-text">使用Model向request域对象共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8map%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.6.</span> <span class="toc-text">使用map向request域对象共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ModelMap%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.7.</span> <span class="toc-text">使用ModelMap向request域对象共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Model%E3%80%81ModelMap%E3%80%81Map%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">6.8.</span> <span class="toc-text">Model、ModelMap、Map的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%91session%E5%9F%9F%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.9.</span> <span class="toc-text">向session域共享数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%91application%E5%9F%9F%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.10.</span> <span class="toc-text">向application域共享数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81SpringMVC%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="toc-number">7.</span> <span class="toc-text">六、SpringMVC的视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ThymeleafView"><span class="toc-number">7.1.</span> <span class="toc-text">1. ThymeleafView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%BD%AC%E5%8F%91%E8%A7%86%E5%9B%BE-%E7%94%A8%E7%9A%84%E4%B8%8D%E6%98%AF%E5%BE%88%E5%A4%9A"><span class="toc-number">7.2.</span> <span class="toc-text">2. 转发视图(用的不是很多)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-number">7.2.1.</span> <span class="toc-text">情况：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">7.2.2.</span> <span class="toc-text">示例：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tips"><span class="toc-number">7.2.3.</span> <span class="toc-text">tips:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%87%8D%E5%AE%9A%E5%90%91%E8%A7%86%E5%9B%BE"><span class="toc-number">7.3.</span> <span class="toc-text">3. 重定向视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5"><span class="toc-number">7.3.1.</span> <span class="toc-text">情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91%E5%8C%BA%E5%88%AB"><span class="toc-number">7.3.2.</span> <span class="toc-text">转发和重定向区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">7.3.3.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E5%AF%B9%E6%AF%94"><span class="toc-number">7.3.4.</span> <span class="toc-text">结果对比</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E6%97%B6"><span class="toc-number">7.3.4.1.</span> <span class="toc-text">转发时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%97%B6"><span class="toc-number">7.3.4.2.</span> <span class="toc-text">重定向时</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8view-controller-%E6%B3%A8%E6%84%8F"><span class="toc-number">7.4.</span> <span class="toc-text">4. 视图控制器view-controller(注意)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tips%EF%BC%9A"><span class="toc-number">7.4.1.</span> <span class="toc-text">tips：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81RESTFul"><span class="toc-number">8.</span> <span class="toc-text">七、RESTFul</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">8.1.</span> <span class="toc-text">1. 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90"><span class="toc-number">8.1.1.</span> <span class="toc-text">资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E7%9A%84%E8%A1%A8%E8%BF%B0"><span class="toc-number">8.1.2.</span> <span class="toc-text">资源的表述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB"><span class="toc-number">8.1.3.</span> <span class="toc-text">状态转移</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-RESTFul%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.2.</span> <span class="toc-text">2. RESTFul的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-HiddenHttpMethodFilter"><span class="toc-number">8.3.</span> <span class="toc-text">3. HiddenHttpMethodFilter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6"><span class="toc-number">8.3.1.</span> <span class="toc-text">条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-1"><span class="toc-number">8.3.2.</span> <span class="toc-text">注意</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81RESTFul%E6%A1%88%E4%BE%8B"><span class="toc-number">9.</span> <span class="toc-text">八、RESTFul案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">9.1.</span> <span class="toc-text">1. 准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83"><span class="toc-number">9.1.1.</span> <span class="toc-text">准备环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AEpom-xml"><span class="toc-number">9.1.1.1.</span> <span class="toc-text">1. 配置pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AEweb-xml-1"><span class="toc-number">9.1.1.2.</span> <span class="toc-text">2. 配置web.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-CharacterEncodingFilter"><span class="toc-number">9.1.1.2.1.</span> <span class="toc-text">1. CharacterEncodingFilter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-HiddenHttpMethodFilter"><span class="toc-number">9.1.1.2.2.</span> <span class="toc-text">2. HiddenHttpMethodFilter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-DispatcherServlet"><span class="toc-number">9.1.1.2.3.</span> <span class="toc-text">3. DispatcherServlet</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%BB%BA%E7%AB%8B%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BBxxController-java"><span class="toc-number">9.1.1.3.</span> <span class="toc-text">3. 建立控制器类xxController.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AEspringMVC-xml"><span class="toc-number">9.1.1.4.</span> <span class="toc-text">4. 配置springMVC.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">9.1.1.4.1.</span> <span class="toc-text">1. 注解扫描</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">9.1.1.4.2.</span> <span class="toc-text">2. 配置视图解析器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%86%E5%A4%87%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">9.1.2.</span> <span class="toc-text">2. 准备实体类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-bean%E5%8C%85"><span class="toc-number">9.1.2.1.</span> <span class="toc-text">1. bean包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Dao%E5%8C%85"><span class="toc-number">9.1.2.2.</span> <span class="toc-text">2. Dao包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Controller%E5%8C%85"><span class="toc-number">9.1.2.3.</span> <span class="toc-text">3. Controller包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%8A%9F%E8%83%BD%E6%B8%85%E5%8D%95"><span class="toc-number">9.2.</span> <span class="toc-text">2. 功能清单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%91%98%E5%B7%A5"><span class="toc-number">9.3.</span> <span class="toc-text">3. 查询所有员工</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%EF%BC%9A%E8%AE%BF%E9%97%AE%E9%A6%96%E9%A1%B5"><span class="toc-number">9.3.1.</span> <span class="toc-text">操作：访问首页(*)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEspringMVC-xml"><span class="toc-number">9.3.1.1.</span> <span class="toc-text">配置springMVC.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">9.3.1.1.1.</span> <span class="toc-text">1. 视图控制器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%AE%BF%E9%97%AE%E9%A9%B1%E5%8A%A8%E5%99%A8"><span class="toc-number">9.3.1.1.2.</span> <span class="toc-text">2. 访问驱动器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-html%E9%A1%B5%E9%9D%A2"><span class="toc-number">9.3.1.1.3.</span> <span class="toc-text">3. html页面</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-html%E9%A1%B5%E9%9D%A2"><span class="toc-number">9.3.2.</span> <span class="toc-text">1. html页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">9.3.3.</span> <span class="toc-text">2. 控制器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4"><span class="toc-number">9.4.</span> <span class="toc-text">4. 删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E6%80%9D%E8%B7%AF"><span class="toc-number">9.4.1.</span> <span class="toc-text">0. 思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%BE%E7%BD%AE%E8%A1%A8%E5%8D%95"><span class="toc-number">9.4.2.</span> <span class="toc-text">1. 设置表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-vue%E8%AE%BE%E7%BD%AE%E8%B6%85%E9%93%BE%E6%8E%A5"><span class="toc-number">9.4.3.</span> <span class="toc-text">2. vue设置超链接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">9.4.3.1.</span> <span class="toc-text">步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E6%A0%BC%E5%BC%8F"><span class="toc-number">9.4.4.</span> <span class="toc-text">3. 设置请求格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9B%A0"><span class="toc-number">9.4.4.1.</span> <span class="toc-text">原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%96%B9%E5%BC%8F"><span class="toc-number">9.4.4.2.</span> <span class="toc-text">错误方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F1%EF%BC%9A"><span class="toc-number">9.4.4.3.</span> <span class="toc-text">正确方式1：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F2%EF%BC%9A"><span class="toc-number">9.4.4.4.</span> <span class="toc-text">正确方式2：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">9.4.5.</span> <span class="toc-text">4. 控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Tips"><span class="toc-number">9.4.6.</span> <span class="toc-text">5. Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%89%93%E5%8C%85"><span class="toc-number">9.4.6.1.</span> <span class="toc-text">1. 打包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%9A%84servlet"><span class="toc-number">9.4.6.2.</span> <span class="toc-text">2. 配置默认的servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-2"><span class="toc-number">9.4.6.2.1.</span> <span class="toc-text">注意</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B7%BB%E5%8A%A0"><span class="toc-number">9.5.</span> <span class="toc-text">5. 添加</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E6%80%9D%E8%B7%AF-1"><span class="toc-number">9.5.1.</span> <span class="toc-text">0. 思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-html%E9%A1%B5%E9%9D%A2-1"><span class="toc-number">9.5.2.</span> <span class="toc-text">1. html页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A7%E5%88%B6%E5%99%A8-1"><span class="toc-number">9.5.3.</span> <span class="toc-text">2. 控制器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9"><span class="toc-number">9.6.</span> <span class="toc-text">6. 修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E6%80%9D%E8%B7%AF-2"><span class="toc-number">9.6.1.</span> <span class="toc-text">0. 思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-html%E9%A1%B5%E9%9D%A2-2"><span class="toc-number">9.6.2.</span> <span class="toc-text">1. html页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">9.6.3.</span> <span class="toc-text">2. 控制器方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81-HttpMessageConverter"><span class="toc-number">10.</span> <span class="toc-text">九、 HttpMessageConverter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-RequestBody"><span class="toc-number">10.1.</span> <span class="toc-text">1. @RequestBody</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-RequestEntity"><span class="toc-number">10.2.</span> <span class="toc-text">2. RequestEntity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ResponseBody"><span class="toc-number">10.3.</span> <span class="toc-text">3. @ResponseBody</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-SpringMVC%E5%A4%84%E7%90%86Json"><span class="toc-number">10.4.</span> <span class="toc-text">4. SpringMVC处理Json</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%95%E5%85%A5jackson%E4%BE%9D%E8%B5%96"><span class="toc-number">10.4.1.</span> <span class="toc-text">1. 引入jackson依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%90%AFmvc%E7%9A%84%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8"><span class="toc-number">10.4.2.</span> <span class="toc-text">2. 开启mvc的注解驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ResponseBody%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.4.3.</span> <span class="toc-text">3. @ResponseBody注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Java%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">10.4.4.</span> <span class="toc-text">4. Java对象作为返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-SpringMVC%E5%A4%84%E7%90%86Ajax"><span class="toc-number">10.5.</span> <span class="toc-text">5. SpringMVC处理Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E7%9A%84%E8%B6%85%E9%93%BE%E6%8E%A5"><span class="toc-number">10.5.1.</span> <span class="toc-text">1. 发送请求的超链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E8%BF%87vue%E5%92%8Caxios%E5%A4%84%E7%90%86%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="toc-number">10.5.2.</span> <span class="toc-text">2. 通过vue和axios处理点击事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">10.5.3.</span> <span class="toc-text">3. 控制器方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-RestController%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.6.</span> <span class="toc-text">6. @RestController注解(*)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-ResponseEntity"><span class="toc-number">10.7.</span> <span class="toc-text">7. ResponseEntity</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD"><span class="toc-number">11.</span> <span class="toc-text">十、文件的上传和下载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">11.1.</span> <span class="toc-text">1. 文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-1"><span class="toc-number">11.1.1.</span> <span class="toc-text">步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">11.2.</span> <span class="toc-text">2. 文件上传</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">12.</span> <span class="toc-text">十一、拦截器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">13.</span> <span class="toc-text">十二、异常处理器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AB%E7%AB%A0-%E8%A1%A5%E5%85%85%E4%BF%A1%E6%81%AF"><span class="toc-number">14.</span> <span class="toc-text">末章 补充信息</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ServletContext%E4%BB%8B%E7%BB%8D"><span class="toc-number">14.1.</span> <span class="toc-text">1. ServletContext介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B-1"><span class="toc-number">14.1.1.</span> <span class="toc-text">1. 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%9C%E7%94%A8"><span class="toc-number">14.1.2.</span> <span class="toc-text">2. 作用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.1.2.1.</span> <span class="toc-text">1. 域对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">14.1.2.2.</span> <span class="toc-text">2. 域对象方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AD%98%E5%82%A8%E7%89%B9%E7%82%B9"><span class="toc-number">14.1.2.3.</span> <span class="toc-text">3. 存储特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8F%AF%E4%BB%A5%E8%AF%BB%E5%8F%96%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">14.1.2.4.</span> <span class="toc-text">4. 可以读取全局配置参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%90%9C%E7%B4%A2%E5%B7%A5%E7%A8%8B%E4%B8%8B%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">14.1.2.5.</span> <span class="toc-text">5. 搜索工程下资源文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%B7%A5%E7%A8%8B%E5%90%8D%E5%AD%97"><span class="toc-number">14.1.2.6.</span> <span class="toc-text">6. 获取当前工程名字</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Servlet%E4%B8%89%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.2.</span> <span class="toc-text">2. Servlet三大域对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-request"><span class="toc-number">14.2.1.</span> <span class="toc-text">1. request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-session"><span class="toc-number">14.2.2.</span> <span class="toc-text">2. session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application"><span class="toc-number">14.2.3.</span> <span class="toc-text">application</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-number">14.2.4.</span> <span class="toc-text">区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%EF%BC%9ApageContext-jsp"><span class="toc-number">14.2.5.</span> <span class="toc-text">附：pageContext(jsp)</span></a></li></ol></li></ol></li></ol>	
        </div>
    
</div>


    </div>
</div>
</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




</html>
